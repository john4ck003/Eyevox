<!DOCTYPE html>
<html>
<head>
    <title>Eyevox Frontend</title>
    <style>
        body {
            margin: 0;
            background: black;
            color: white;
            font-family: sans-serif;
            overflow: hidden;
        }

        .page {
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .main-menu {
            width: 100%;
            text-align: center;
        }

        .status-display {
            height: 3rem;
            margin-bottom: 1rem;
        }

        .menu-container {
            position: relative;
            height: 200px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .selector {
            position: absolute;
            width: 13rem;
            height: 13rem;
            border-radius: 50%;
            border: 2px solid #55EFC4;
            pointer-events: none;
            z-index: 2;
        }

        .options {
            display: flex;
            transition: transform 0.4s ease;
            align-items: center;
        }

        .option {
            width: 200px;
            flex-shrink: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            font-size: 2.2rem;
            font-weight: bold;
            opacity: 0.3;
            transform: scale(0.6);
            transition: all 0.3s ease;
            cursor: pointer;
            /* Changes for multi-line wrapping */
            white-space: normal; 
            line-height: 1.1;
            padding: 0 10px;
            box-sizing: border-box;
        }

        .option.active {
            opacity: 1;
            transform: scale(1);
            text-shadow: 0 0 10px rgba(85,239,196,0.5);
        }

        .instructions {
            color: #888;
            margin-top: 2rem;
        }
    </style>
</head>
<body>

<div class="page">
    <div class="main-menu">
        <div class="status-display" id="status"></div>
        <div class="menu-container">
            <div class="selector"></div>
            <div id="options" class="options"></div>
        </div>
        <div class="instructions">Arrow keys or Click to select</div>
    </div>
</div>

<script>
    const OPTION_WIDTH = 200;
    const MAIN_MENU = ['Food', 'Greet', 'Start', 'Help', 'Binge'];
    
    const SUB_MENUS = {
        Food: ['Water', 'Juice', 'X', 'Rice', 'Bread'],
        Greet: ['Hi', 'Good Morning', 'X', 'Have a Nice Day', 'Thank You'],
        Help: ['Toilet', 'X', 'Emergency'],
        Binge: ['Netflix', 'X', 'YouTube']
    };

    let menuLevel = 'main';
    let menuItems = [...MAIN_MENU];
    let activeIndex = 2;

    const optionsDiv = document.getElementById('options');
    const statusDiv = document.getElementById('status');

    function renderMenu() {
        optionsDiv.innerHTML = '';
        menuItems.forEach((item, index) => {
            const div = document.createElement('div');
            div.className = 'option';
            div.innerText = item;
            div.onclick = () => {
                activeIndex = index;
                updateUI();
                selectItem();
            };
            optionsDiv.appendChild(div);
        });
        updateUI();
    }

    function updateUI() {
        const centerIndex = menuItems.indexOf('X') !== -1 ? menuItems.indexOf('X') : 2;
        
        optionsDiv.style.transform = `translateX(${(centerIndex - activeIndex) * OPTION_WIDTH}px)`;

        document.querySelectorAll('.option').forEach((el, i) => {
            el.classList.toggle('active', i === activeIndex);
        });

        const selected = menuItems[activeIndex];
        if (selected === 'Start' || selected === 'X') {
            statusDiv.innerHTML = `<h2 style="opacity:0.5">Waiting for movement...</h2>`;
        } else {
            statusDiv.innerHTML = `<h2>Selecting: ${selected}</h2>`;
        }
    }

    function resetToMain() {
        menuItems = [...MAIN_MENU];
        menuLevel = 'main';
        activeIndex = 2;
        renderMenu();
    }

    function selectItem() {
        const selected = menuItems[activeIndex];
        if (!selected) return;

        if (menuLevel === 'main') {
            if (selected === 'Start') return;
            menuItems = SUB_MENUS[selected];
            menuLevel = 'sub';
            activeIndex = menuItems.indexOf('X');
            renderMenu();
        } else {
            if (selected === 'X') {
                resetToMain();
            } else {
                statusDiv.innerHTML = `<h2 style="color:#55EFC4">ACTION: ${selected}</h2>`;
                setTimeout(() => {
                    resetToMain();
                }, 1200);
            }
        }
    }

    window.addEventListener('keydown', e => {
        if (e.key === 'ArrowLeft') {
            activeIndex = Math.max(0, activeIndex - 1);
        }
        if (e.key === 'ArrowRight') {
            activeIndex = Math.min(menuItems.length - 1, activeIndex + 1);
        }
        if (e.key === 'Enter') {
            selectItem();
        }
        updateUI();
    });

    renderMenu();
</script>

</body>
</html>